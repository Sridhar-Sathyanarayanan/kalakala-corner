<div class="product-details-container">
  <!-- Left: Image Carousel -->
  <div class="carousel-container">
    <div class="image-wrapper">
      <img [src]="data.images[currentIndex]" [alt]="data.name" class="carousel-image" />

      <button mat-icon-button class="nav-btn prev" (click)="prevImage()" aria-label="Previous image">
        <mat-icon>chevron_left</mat-icon>
      </button>

      <button mat-icon-button class="nav-btn next" (click)="nextImage()" aria-label="Next image">
        <mat-icon>chevron_right</mat-icon>
      </button>
    </div>

    <div class="dots">
      @for (img of data.images; track img) {
      <span class="dot" [class.active]="$index === currentIndex" (click)="currentIndex = $index"></span>
      }
    </div>
  </div>

  <!-- Right: Product Info -->
  <div class="details-container">
    <h2>{{ data.name }}</h2>
    <p class="price">₹{{ data.minPrice }} - {{ data.maxPrice }}</p>
    <p>{{ data.desc }}</p>
    @if (data.variants?.length) {
    <div class="variants">
      <h4>Variants:</h4>
      <table mat-table [dataSource]="data.variants" class="variants-table mat-elevation-z2">
        <!-- Size Column -->
        <ng-container matColumnDef="size">
          <th mat-header-cell *matHeaderCellDef>Size</th>
          <td mat-cell *matCellDef="let v">{{ v.size }}</td>
        </ng-container>

        <!-- Measurement Column -->
        <ng-container matColumnDef="measurement">
          <th mat-header-cell *matHeaderCellDef>Measurement</th>
          <td mat-cell *matCellDef="let v">{{ v.measurement }}</td>
        </ng-container>

        <!-- Price Column -->
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef>Price</th>
          <td mat-cell *matCellDef="let v">₹{{ v.price }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="['size', 'measurement', 'price']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['size', 'measurement', 'price']"></tr>
      </table>
    </div>
    }

    <div class="actions">
      <button mat-flat-button color="primary" (click)="close()">Close</button>
    </div>
  </div>
</div>