<div class="product-details-container">
  <!-- Left: Image Carousel -->
  <div class="carousel-container">
    <div class="image-wrapper">
      <img [src]="data.images[currentIndex]" [alt]="data.name" class="carousel-image" />

      <button mat-icon-button class="nav-btn prev icon" (click)="prevImage()" aria-label="Previous image">
        <mat-icon>chevron_left</mat-icon>
      </button>

      <button mat-icon-button class="nav-btn next icon" (click)="nextImage()" aria-label="Next image">
        <mat-icon>chevron_right</mat-icon>
      </button>
    </div>

    <div class="dots">
      @for (img of data.images; track img) {
      <span class="dot" [class.active]="$index === currentIndex" (click)="currentIndex = $index"></span>
      }
    </div>
  </div>

  <!-- Right: Product Info -->
  <div class="details-container">
      <button mat-icon-button class="close-btn" color="primary" (click)="close()" aria-label="Close">
    <mat-icon>close</mat-icon>
  </button>
    <h2>{{ data.name }}</h2>
    <p class="price">
      @if(data.minPrice != data.maxPrice){<span class="price__value">₹{{ data.minPrice }} - {{ data.maxPrice }}</span>}
      @else {
      <span class="price__value">₹{{ data.minPrice }}</span>
      }
    </p>
    <p>{{ data.desc }}</p>

    @if (data.variants?.length) {
    <div class="variants">
      <h4>Variants</h4>
      <mat-divider></mat-divider>
      <br>
      <table mat-table [dataSource]="data.variants" class="variants-table mat-elevation-z2">
        <!-- Size Column -->
        <ng-container matColumnDef="size">
          <th mat-header-cell *matHeaderCellDef>Size</th>
          <td mat-cell *matCellDef="let v">{{ v.size }}</td>
        </ng-container>

        <!-- Measurement Column -->
        <ng-container matColumnDef="measurement">
          <th mat-header-cell *matHeaderCellDef>Measurement</th>
          <td mat-cell *matCellDef="let v">{{ v.measurement }}</td>
        </ng-container>

        <!-- Price Column -->
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef>Price</th>
          <td mat-cell *matCellDef="let v">₹{{ v.price }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef='["size", "measurement", "price"]'></tr>
        <tr mat-row *matRowDef="let row; columns: ['size', 'measurement', 'price']"></tr>
      </table>
    </div>
    }

    @if (data.notes?.length) {
    <div class="notes-section">
      <h4>Notes</h4>
      <mat-divider></mat-divider>
      <table class="notes-table">
        <tbody>
          @for (note of data.notes; track note) {
            <tr class="note-row">
              <td class="note-bullet">
                <span class="custom-bullet">&#9679;</span>
              </td>
              <td class="note-content">{{ note }}</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
    }

  </div>
</div>